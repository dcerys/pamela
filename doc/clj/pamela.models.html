<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>pamela.models documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Pamela 0.2.2-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><a href="index.html"><span class="inner">Namespaces</span></a></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pamela</span></div></div></li><li class="depth-2 branch"><a href="pamela.cli.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cli</span></div></a></li><li class="depth-2 branch"><a href="pamela.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="pamela.daemon.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>daemon</span></div></a></li><li class="depth-2 branch"><a href="pamela.db.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>db</span></div></a></li><li class="depth-2 branch"><a href="pamela.log.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>log</span></div></a></li><li class="depth-2 branch"><a href="pamela.mode.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>mode</span></div></a></li><li class="depth-2 branch current"><a href="pamela.models.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>models</span></div></a></li><li class="depth-2 branch"><a href="pamela.pclass.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>pclass</span></div></a></li><li class="depth-2 branch"><a href="pamela.tpn.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tpn</span></div></a></li><li class="depth-2 branch"><a href="pamela.tpnrecords.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>tpnrecords</span></div></a></li><li class="depth-2 branch"><a href="pamela.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li><li class="depth-2"><a href="pamela.web.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>web</span></div></a></li></ul></div><div class="sidebar" id="vars"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="pamela.models.html#var-ask"><div class="inner"><span>ask</span></div></a></li><li class="depth-1"><a href="pamela.models.html#var-assert"><div class="inner"><span>assert</span></div></a></li><li class="depth-1"><a href="pamela.models.html#var-between"><div class="inner"><span>between</span></div></a></li><li class="depth-1"><a href="pamela.models.html#var-between-ends"><div class="inner"><span>between-ends</span></div></a></li><li class="depth-1"><a href="pamela.models.html#var-between-starts"><div class="inner"><span>between-starts</span></div></a></li><li class="depth-1"><a href="pamela.models.html#var-catch"><div class="inner"><span>catch</span></div></a></li><li class="depth-1"><a href="pamela.models.html#var-check-choice-params"><div class="inner"><span>check-choice-params</span></div></a></li><li class="depth-1"><a href="pamela.models.html#var-choice"><div class="inner"><span>choice</span></div></a></li><li class="depth-1"><a href="pamela.models.html#var-choose"><div class="inner"><span>choose</span></div></a></li><li class="depth-1"><a href="pamela.models.html#var-condition"><div class="inner"><span>condition</span></div></a></li><li class="depth-1"><a href="pamela.models.html#var-expect-number-or-lvar"><div class="inner"><span>expect-number-or-lvar</span></div></a></li><li class="depth-1"><a href="pamela.models.html#var-get-label-bounds-body"><div class="inner"><span>get-label-bounds-body</span></div></a></li><li class="depth-1"><a href="pamela.models.html#var-helper.3F"><div class="inner"><span>helper?</span></div></a></li><li class="depth-1"><a href="pamela.models.html#var-load-pamela"><div class="inner"><span>load-pamela</span></div></a></li><li class="depth-1"><a href="pamela.models.html#var-load-pamela-project"><div class="inner"><span>load-pamela-project</span></div></a></li><li class="depth-1"><a href="pamela.models.html#var-load-pamela-string"><div class="inner"><span>load-pamela-string</span></div></a></li><li class="depth-1"><a href="pamela.models.html#var-maintain"><div class="inner"><span>maintain</span></div></a></li><li class="depth-1"><a href="pamela.models.html#var-new-pclass"><div class="inner"><span>new-pclass</span></div></a></li><li class="depth-1"><a href="pamela.models.html#var-noop"><div class="inner"><span>noop</span></div></a></li><li class="depth-1"><a href="pamela.models.html#var-parallel"><div class="inner"><span>parallel</span></div></a></li><li class="depth-1"><a href="pamela.models.html#var-sequence"><div class="inner"><span>sequence</span></div></a></li><li class="depth-1"><a href="pamela.models.html#var-tell"><div class="inner"><span>tell</span></div></a></li><li class="depth-1"><a href="pamela.models.html#var-try-form"><div class="inner"><span>try-form</span></div></a></li><li class="depth-1"><a href="pamela.models.html#var-unless"><div class="inner"><span>unless</span></div></a></li><li class="depth-1"><a href="pamela.models.html#var-when"><div class="inner"><span>when</span></div></a></li><li class="depth-1"><a href="pamela.models.html#var-whenever"><div class="inner"><span>whenever</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h2 class="anchor" id="top">pamela.models</h2><div class="doc"><pre class="plaintext">The pamela.models namespace is used to import all PAMELA models.
The symbols defined in this namespace with {:pamela :models-helper}
metadata are helper functions. All other symbols have been imported.</pre></div><div class="public anchor" id="var-ask"><h3>ask</h3><h4 class="type">macro</h4><h4 class="added">added in 0.2.0</h4><div class="usage"><code>(ask condition &amp; [time-bounds])</code></div><div class="doc"><pre class="plaintext">Wait for condition during time bounds, else fail
(for thread synchronization).</pre></div><div class="src-link"><a href="https://bitbucket.org/dollinc-pamela/pamela/src/master/code/src/main/clj/pamela/models.clj#cl-344">view source</a></div></div><div class="public anchor" id="var-assert"><h3>assert</h3><h4 class="type">macro</h4><h4 class="added">added in 0.2.0</h4><div class="usage"><code>(assert condition &amp; time)</code></div><div class="doc"><pre class="plaintext">Try to achieve condition throughout the specified time bounds.
</pre></div><div class="src-link"><a href="https://bitbucket.org/dollinc-pamela/pamela/src/master/code/src/main/clj/pamela/models.clj#cl-112">view source</a></div></div><div class="public anchor" id="var-between"><h3>between</h3><h4 class="type">macro</h4><h4 class="added">added in 0.2.0</h4><div class="usage"><code>(between label1 label2 &amp; [time-bounds])</code></div><div class="doc"><pre class="plaintext">This constrains that the time between the form named by
label1 and label2 is &lt;time bounds&gt;. ie: sequential actions
with gap between.</pre></div><div class="src-link"><a href="https://bitbucket.org/dollinc-pamela/pamela/src/master/code/src/main/clj/pamela/models.clj#cl-297">view source</a></div></div><div class="public anchor" id="var-between-ends"><h3>between-ends</h3><h4 class="type">macro</h4><h4 class="added">added in 0.2.0</h4><div class="usage"><code>(between-ends label1 label2 &amp; [time-bounds])</code></div><div class="doc"><pre class="plaintext">Form named by &lt;label2&gt; ends &lt;time bounds&gt; after form named by &lt;label1&gt;.
</pre></div><div class="src-link"><a href="https://bitbucket.org/dollinc-pamela/pamela/src/master/code/src/main/clj/pamela/models.clj#cl-329">view source</a></div></div><div class="public anchor" id="var-between-starts"><h3>between-starts</h3><h4 class="type">macro</h4><h4 class="added">added in 0.2.0</h4><div class="usage"><code>(between-starts label1 label2 &amp; [time-bounds])</code></div><div class="doc"><pre class="plaintext">Form named by &lt;label2&gt; begins &lt;time bounds&gt; after form named by &lt;label1&gt;.
</pre></div><div class="src-link"><a href="https://bitbucket.org/dollinc-pamela/pamela/src/master/code/src/main/clj/pamela/models.clj#cl-314">view source</a></div></div><div class="public anchor" id="var-catch"><h3>catch</h3><h4 class="added">added in 0.2.0</h4><div class="usage"><code>(catch &amp; body)</code></div><div class="doc"><pre class="plaintext">Failure handling block for try-form.
</pre></div><div class="src-link"><a href="https://bitbucket.org/dollinc-pamela/pamela/src/master/code/src/main/clj/pamela/models.clj#cl-291">view source</a></div></div><div class="public anchor" id="var-check-choice-params"><h3>check-choice-params</h3><h4 class="added">added in 0.2.0</h4><div class="usage"><code>(check-choice-params params)</code></div><div class="doc"><pre class="plaintext">Check validity of choice parameters (helper function).
</pre></div><div class="src-link"><a href="https://bitbucket.org/dollinc-pamela/pamela/src/master/code/src/main/clj/pamela/models.clj#cl-233">view source</a></div></div><div class="public anchor" id="var-choice"><h3>choice</h3><h4 class="type">macro</h4><h4 class="added">added in 0.2.0</h4><div class="usage"><code>(choice &amp; body)</code></div><div class="doc"><pre class="plaintext">Define a choice (see also choose).
</pre></div><div class="src-link"><a href="https://bitbucket.org/dollinc-pamela/pamela/src/master/code/src/main/clj/pamela/models.clj#cl-253">view source</a></div></div><div class="public anchor" id="var-choose"><h3>choose</h3><h4 class="type">macro</h4><h4 class="added">added in 0.2.0</h4><div class="usage"><code>(choose &amp; choices)</code></div><div class="doc"><pre class="plaintext">One of the choices will be taken either to maximize reward, minimise
cost, or randomly weighted by relative probability, or just randomly
(equal chance for each choice) if no probability is provided.

(choose
  (choice &lt;body&gt; {[&lt;time bounds&gt;]|} {:probability &lt;n&gt;|} {:cost &lt;n&gt;|} {:reward &lt;n&gt;|} {:guard (&lt;condition&gt;)|})
…)

Note that &lt;n&gt; can be a numeric constant or a logic variable.</pre></div><div class="src-link"><a href="https://bitbucket.org/dollinc-pamela/pamela/src/master/code/src/main/clj/pamela/models.clj#cl-200">view source</a></div></div><div class="public anchor" id="var-condition"><h3>condition</h3><h4 class="type">macro</h4><h4 class="added">added in 0.2.0</h4><div class="usage"><code>(condition &amp; body)</code></div><div class="doc"><div class="markdown"><p>Define a condition.</p><p>Conditions must - if keyword then converted to (mode= keyword) - return boolean type - comprised of and, or, not, implies - either (field= field-kw constant) or (mode= mode-kw) - must not have cycles</p><p>Conditions may appear in - mode definitions - transition :pre :post conditions - method :pre :post conditions</p></div></div><div class="src-link"><a href="https://bitbucket.org/dollinc-pamela/pamela/src/master/code/src/main/clj/pamela/models.clj#cl-65">view source</a></div></div><div class="public anchor" id="var-expect-number-or-lvar"><h3>expect-number-or-lvar</h3><h4 class="added">added in 0.2.0</h4><div class="usage"><code>(expect-number-or-lvar param value)</code></div><div class="doc"><pre class="plaintext">Verify the value for param is a number or lvar. (helper function)
</pre></div><div class="src-link"><a href="https://bitbucket.org/dollinc-pamela/pamela/src/master/code/src/main/clj/pamela/models.clj#cl-223">view source</a></div></div><div class="public anchor" id="var-get-label-bounds-body"><h3>get-label-bounds-body</h3><h4 class="added">added in 0.2.0</h4><div class="usage"><code>(get-label-bounds-body body)</code></div><div class="doc"><pre class="plaintext">Return the bounds and the body (where bounds are optional)
</pre></div><div class="src-link"><a href="https://bitbucket.org/dollinc-pamela/pamela/src/master/code/src/main/clj/pamela/models.clj#cl-40">view source</a></div></div><div class="public anchor" id="var-helper.3F"><h3>helper?</h3><h4 class="added">added in 0.2.0</h4><div class="usage"><code>(helper? x)</code></div><div class="doc"><pre class="plaintext">Is x a helper function?
</pre></div><div class="src-link"><a href="https://bitbucket.org/dollinc-pamela/pamela/src/master/code/src/main/clj/pamela/models.clj#cl-33">view source</a></div></div><div class="public anchor" id="var-load-pamela"><h3>load-pamela</h3><h4 class="added">added in 0.2.0</h4><div class="usage"><code>(load-pamela path)</code></div><div class="doc"><pre class="plaintext">Load a pamela file from a pathname (in pamela.models ns)
</pre></div><div class="src-link"><a href="https://bitbucket.org/dollinc-pamela/pamela/src/master/code/src/main/clj/pamela/models.clj#cl-369">view source</a></div></div><div class="public anchor" id="var-load-pamela-project"><h3>load-pamela-project</h3><h4 class="added">added in 0.2.0</h4><div class="usage"><code>(load-pamela-project project-path)</code></div><div class="doc"><pre class="plaintext">Load a pamela file from a pathname relative to the project
</pre></div><div class="src-link"><a href="https://bitbucket.org/dollinc-pamela/pamela/src/master/code/src/main/clj/pamela/models.clj#cl-381">view source</a></div></div><div class="public anchor" id="var-load-pamela-string"><h3>load-pamela-string</h3><h4 class="added">added in 0.2.0</h4><div class="usage"><code>(load-pamela-string source &amp; [url])</code></div><div class="doc"><pre class="plaintext">Load a pamela model from a string(in pamela.models ns)
</pre></div><div class="src-link"><a href="https://bitbucket.org/dollinc-pamela/pamela/src/master/code/src/main/clj/pamela/models.clj#cl-360">view source</a></div></div><div class="public anchor" id="var-maintain"><h3>maintain</h3><h4 class="type">macro</h4><h4 class="added">added in 0.2.0</h4><div class="usage"><code>(maintain condition &amp; body)</code></div><div class="doc"><pre class="plaintext">Try to achieve condition throughout the specified time bounds
and maintain it for the duration of body.</pre></div><div class="src-link"><a href="https://bitbucket.org/dollinc-pamela/pamela/src/master/code/src/main/clj/pamela/models.clj#cl-95">view source</a></div></div><div class="public anchor" id="var-new-pclass"><h3>new-pclass</h3><h4 class="added">added in 0.2.0</h4><div class="usage"><code>(new-pclass pclass &amp; args)</code></div><div class="doc"><pre class="plaintext">Instanciate a predefined pclass.
</pre></div><div class="src-link"><a href="https://bitbucket.org/dollinc-pamela/pamela/src/master/code/src/main/clj/pamela/models.clj#cl-27">view source</a></div></div><div class="public anchor" id="var-noop"><h3>noop</h3><h4 class="type">macro</h4><h4 class="added">added in 0.2.0</h4><div class="usage"><code>(noop)</code></div><div class="doc"><pre class="plaintext">No operation function (used for testing)
</pre></div><div class="src-link"><a href="https://bitbucket.org/dollinc-pamela/pamela/src/master/code/src/main/clj/pamela/models.clj#cl-89">view source</a></div></div><div class="public anchor" id="var-parallel"><h3>parallel</h3><h4 class="type">macro</h4><h4 class="added">added in 0.2.0</h4><div class="usage"><code>(parallel &amp; body)</code></div><div class="doc"><pre class="plaintext">The forms that constitute body are performed in parallel
within the specified time bounds. The form will exit with failure
if the last item has not completed within the upper time bound.</pre></div><div class="src-link"><a href="https://bitbucket.org/dollinc-pamela/pamela/src/master/code/src/main/clj/pamela/models.clj#cl-184">view source</a></div></div><div class="public anchor" id="var-sequence"><h3>sequence</h3><h4 class="type">macro</h4><h4 class="added">added in 0.2.0</h4><div class="usage"><code>(sequence &amp; body)</code></div><div class="doc"><pre class="plaintext">The forms that constitute body are performed in sequence
within the specified time bounds. The form will exit with failure
if the last item has not completed within the upper time bound.</pre></div><div class="src-link"><a href="https://bitbucket.org/dollinc-pamela/pamela/src/master/code/src/main/clj/pamela/models.clj#cl-168">view source</a></div></div><div class="public anchor" id="var-tell"><h3>tell</h3><h4 class="type">macro</h4><h4 class="added">added in 0.2.0</h4><div class="usage"><code>(tell condition)</code></div><div class="doc"><pre class="plaintext">Assert condition (for thread synchronization).
</pre></div><div class="src-link"><a href="https://bitbucket.org/dollinc-pamela/pamela/src/master/code/src/main/clj/pamela/models.clj#cl-352">view source</a></div></div><div class="public anchor" id="var-try-form"><h3>try-form</h3><h4 class="added">added in 0.2.0</h4><div class="usage"><code>(try-form &amp; form-time-body)</code></div><div class="doc"><pre class="plaintext">The form is performed, but if a problem is encountered,
 body is run. A problem here is if a constraint cannot be achieved.

(try form [&lt;time bounds&gt;] (catch body))</pre></div><div class="src-link"><a href="https://bitbucket.org/dollinc-pamela/pamela/src/master/code/src/main/clj/pamela/models.clj#cl-274">view source</a></div></div><div class="public anchor" id="var-unless"><h3>unless</h3><h4 class="type">macro</h4><h4 class="added">added in 0.2.0</h4><div class="usage"><code>(unless condition &amp; body)</code></div><div class="doc"><pre class="plaintext">If condition is not true body will be performed.
</pre></div><div class="src-link"><a href="https://bitbucket.org/dollinc-pamela/pamela/src/master/code/src/main/clj/pamela/models.clj#cl-136">view source</a></div></div><div class="public anchor" id="var-when"><h3>when</h3><h4 class="type">macro</h4><h4 class="added">added in 0.2.0</h4><div class="usage"><code>(when condition &amp; body)</code></div><div class="doc"><pre class="plaintext">If condition is true body will be performed once
(i.e. if condition is true in this time window).</pre></div><div class="src-link"><a href="https://bitbucket.org/dollinc-pamela/pamela/src/master/code/src/main/clj/pamela/models.clj#cl-120">view source</a></div></div><div class="public anchor" id="var-whenever"><h3>whenever</h3><h4 class="type">macro</h4><h4 class="added">added in 0.2.0</h4><div class="usage"><code>(whenever condition &amp; body)</code></div><div class="doc"><pre class="plaintext">Every time that condition is true body will be performed.
Limited to the time bounds (if provided).</pre></div><div class="src-link"><a href="https://bitbucket.org/dollinc-pamela/pamela/src/master/code/src/main/clj/pamela/models.clj#cl-151">view source</a></div></div></div></body></html>